<list>
  <com.axibase.collector.model.job.json.JsonJobConfig>
    <name>dockerhub-poller</name>
    <cronExpression>R 0/5 * * * ?</cronExpression>
    <enabled>true</enabled>
    <jobType>JSON</jobType>
    <defaultTags/>
    <checkLastTime>false</checkLastTime>
    <commitInterval>10</commitInterval>
    <errorThreshold>0</errorThreshold>
    <configurations>
      <com.axibase.collector.model.job.json.JsonConfiguration>
        <name>dockerhub</name>
        <protocol>HTTP</protocol>
        <path>https://hub.docker.com/v2/repositories/${ITEM?split(&apos;,&apos;)[2]}/${ITEM?split(&apos;,&apos;)[1]}/buildhistory/?page=1&amp;page_size=1</path>
        <format>JSON</format>
        <entitySet>
          <name>dockerhub-repos</name>
          <type>URL</type>
          <discardDuplicates>false</discardDuplicates>
          <entities>
            <string>https://hub.docker.com/v2/repositories/axibase/</string>
          </entities>
          <separator>,</separator>
          <contentFormat>JSON</contentFormat>
          <jsonPath>$[&apos;results&apos;][*]</jsonPath>
        </entitySet>
        <payloadMethod>GET</payloadMethod>
        <httpHeaders/>
        <enableWebDriver>false</enableWebDriver>
        <driverTimeout>0</driverTimeout>
        <deleteFileOnUpload>false</deleteFileOnUpload>
        <ignoreDuplicates>true</ignoreDuplicates>
        <ignoreInvalidCommands>false</ignoreInvalidCommands>
        <settings>
          <com.axibase.collector.model.job.json.JsonConfigurationSetting>
            <defaultEntity>docker.hub</defaultEntity>
            <timeEnabled>false</timeEnabled>
            <timeFormat>yyyy-MM-dd&apos;T&apos;HH:mm:ss.SSSSSSZ</timeFormat>
            <seriesEnabled>false</seriesEnabled>
            <metricPrefix>docker_hub.</metricPrefix>
            <includedFields>
              <string>status</string>
            </includedFields>
            <excludedFields/>
            <propertyEnabled>false</propertyEnabled>
            <propertyKeyFields/>
            <propertyValueFields/>
            <messageEnabled>true</messageEnabled>
            <messageDefaultType>build</messageDefaultType>
            <messageDefaultSource>docker.hub</messageDefaultSource>
            <messageTagFields>
              <string>build_code</string>
              <string>last_updated</string>
              <string>dockertag_name</string>
              <string>cause</string>
              <string>id</string>
              <string>created_date</string>
              <string>status</string>
            </messageTagFields>
            <jsonPath>$[&apos;results&apos;][*]</jsonPath>
            <depth>1</depth>
            <customTags>
              <entry>
                <string>name</string>
                <string>${ITEM?split(&apos;,&apos;)[1]}</string>
              </entry>
              <entry>
                <string>repository</string>
                <string>${ITEM?split(&apos;,&apos;)[2]}/${ITEM?split(&apos;,&apos;)[1]}</string>
              </entry>
              <entry>
                <string>user</string>
                <string>${ITEM?split(&apos;,&apos;)[2]}</string>
              </entry>
            </customTags>
            <renamedFields/>
            <rawCommands/>
          </com.axibase.collector.model.job.json.JsonConfigurationSetting>
        </settings>
        <streamEnabled>false</streamEnabled>
      </com.axibase.collector.model.job.json.JsonConfiguration>
    </configurations>
  </com.axibase.collector.model.job.json.JsonJobConfig>
</list>