# Мониторинг Инфрастуктуры ИТ

## 3. Требования к функциональным, техническим и эксплуатационным характеристикам

### 3.1. Предоставление единой графической консоли для доступа к конфигурационным единицам

3.1.1) Возможность использования единой консоли для отображения, анализа и управления всей событийной информацией, поступающей от компонентов мониторинга сетевой инфраструктурой и серверного оборудования

Продукт: АС

> SR

3.1.2) Возможность представления в единой консоли совокупных, взаимосвязанных данных топологических представлений активного сетевого оборудования и  сервисно-ресурсной модели серверных платформ

Продукт: АС

> SR

3.1.3) Доступ к консоли на основе ролевой модели

Продукт: ATSD

> AV

* Пример из UI выдачи прав на просмотр пользовательской группе
* Портал, который представляет данные по разному в зависимости от  роли: `userHasRole`
* Портал, который представляет данные по разному в зависимости от  принадлежности к заданной группе: `userInGroup`
* Портал в режиме гостевого доступа

3.1.4) Возможность категоризации событийной информации по типу

> to be clarified

3.1.5) Возможность отображания и градации состояния элементов ИТ-инфраструктуры в терминах, обобщающих низкоуровневые события

> to be clarified

3.1.6) Возможность отображения зависимых друг от друга сообщений (отображение причинно-следственной связи на уровне событий)

> to be clarified

3.1.7) Возможность просмотра графиков производительности по контексту

Продукт: ATSD

> AV

* Открытие графика из строки таблицы, например загрузка ЦПУ несколькими серверами и график открывает историю.
* Открытие порталов для сущности из консоли алертов
* Обновление виджета по нажатию. Должно быть сделать в портале Докера.
* Открыть график по ссылке из email alert

3.1.8) Возможность отображения на одном графике данных от нескольких источников для возможности сопоставления и оценки работы объектов мониторинга

Продукт: АТСД

> AV

* График с двумя осями: CPU server и Java GC %
* График с двумя осями: nginx request count (latency), сеть (байты), и ЦПУ
* Календарь с несколькими серверами - при этом ЦПУ с scollector (linux) и SCOM windows

3.1.9) Возможность гибкой настройки оповещений ответственных в соответствии с их зонами ответственности и событиями, приходящими от подсистем системы мониторинга

Продукт: АТСД

> AR

* Условные выражения для отправки почты на разные адреса в зависисмости от критичности события и от времени суток
* Отмена уведомлений по расписанию с использованием cancelAction
* Отправка уведомления на группу пользователей
* Отправка уведомления собственнику системы (указан email в тэге owner сущности)
* Отправка уведомления подвыборке подписанных пользовалей - по ключевым словам. В данном примере лучше взять messages - чтобы пользователи могли указать type/source где-то в настройках

3.1.10) Сбор данных о метриках функционирования серверного оборудования и рабочих станций (степень утилизации, загрузка CPU, RAM, HDD)

Продукт: АТСД

> IS

* Таблица с типом ОС (windows, linux, aix) и поддерживаемые агенты со ссылками: scollector, tcollector, nmon, и т.д.
* Пример entity view, портала и списки собираемых метрик

3.1.11) Сбор данных о метриках функционирования сетевого оборудования (сетевая доступность конфигурационных единиц, степень утлизация каналов связи)

Продукт: АТСД

> IS

* SNMP задача:
  * Список собираемых метрик для базового файла MIB
  * Список MIB файлов
  * SNMP портал с доступностью и утилизация

3.1.12) Сбор данных о метриках функционирования приложений (статусы\состояния)

* Поддерживаемые источники данных 

  * **Базы данных**
    * Oracle
    * IBM DB2
    * Microsoft SQL Server
    * MySQL
    * PostgreSQL
    * Sybase
    * Apache Derby
    * Vertica
    * ATSD
    * SAP HANA
    * OSIsoft PI Data Archive
    * OSIsoft PIOleDBEnt
    * Custom
  
  * **Сетевые протоколы и протоколы передачи данных**
    
    * JDBC
    * SNMP
    * JMX
    * ICMP
    * TCP
    * HTTP
    * MQTT
    
  * **Файловые форматы**
 
    * CSV
    * TSV
    * Text
    * JSON

  * **APIs**
    * Kafka
    * Amazon Web Services CloudWatch
    * Docker Engine
    * HP OVPM (Performance Manager)
    
    
    
* Примеры

| Продукт | Источник данных | Портал |
| --- | --- | --- |
| [ATSD](http://axibase.com/docs/atsd) | Built-in | [↗](https://nur.axibase.com/portal/156.xhtml?menu=true)
| [ActiveMQ](https://axibase.com/docs/axibase-collector/jobs/examples/activemq/) | JMX | [↗](https://apps.axibase.com/chartlab/2f11a5ef) |
| [HP OpenView](https://axibase.com/docs/axibase-collector/jobs/examples/hp-openview/) | OVMP | [↗](https://apps.axibase.com/chartlab/f9d176ac/2/) |
| [JVM](https://axibase.com/docs/axibase-collector/jobs/examples/jvm/) | JMX | [↗](https://apps.axibase.com/chartlab/e6911d9d) |
| [Docker](https://axibase.com/docs/axibase-collector/jobs/docker.html) | Docker | [↗](https://nur.axibase.com/portal/tabs?entity=nurswghbs001&id=112&id=38&id=113&id=2&id=45&id=24) |
| [NGINX](https://axibase.com/docs/axibase-collector/jobs/examples/nginx/) | File | [↗](https://apps.axibase.com/chartlab/966f33e4) |
| [Tomcat](https://axibase.com/docs/axibase-collector/jobs/examples/tomcat/) | JMX | [↗](https://apps.axibase.com/chartlab/106bddba) |
| [Jetty](https://axibase.com/docs/axibase-collector/jobs/examples/jetty/) | JMX | [↗](https://apps.axibase.com/chartlab/8a7d8268) |
| [SCOM](https://axibase.com/docs/axibase-collector/jobs/examples/scom/) |  JDBC| [↗](https://apps.axibase.com/chartlab/c09dc1cd) |
| [Oracle EM](https://axibase.com/docs/axibase-collector/jobs/examples/oracle-enterprise-manager/) | JDBC | [↗](https://apps.axibase.com/chartlab/8c86c962) |
|[PostgreSQL](https://axibase.com/docs/axibase-collector/jobs/examples/postgres/) | JDBC | [↗](https://apps.axibase.com/chartlab/070b4941) |
| [IBM Tivoli](https://axibase.com/use-cases/integrations/itm/) | File | [↗](https://apps.axibase.com/chartlab/43f054ee)|
| [Marathon](https://axibase.com/use-cases/integrations/marathon/capacity-and-usage/) | JSON | [↗](https://nur.axibase.com/portal/name/Marathon%20App%20Portal?entity=%2Fbasic-0) |
| [Kafka](https://axibase.com/use-cases/integrations/kafka/) | Kafka | [↗](https://nur.axibase.com/portal/name/Kafka%20Broker?entity=nurswgvml700.axibase.com) |
| [Socrata](https://axibase.com/use-cases/integrations/socrata/) | SOCRATA | [↗](https://apps.axibase.com/chartlab/f5eae012) |
|[VMWare](https://axibase.com/docs/axibase-collector/jobs/examples/vmware/) | JDBC | [↗](https://apps.axibase.com/chartlab/36ae5c9e/3/) |
|[Spring Boot](https://axibase.com/docs/atsd/integration/spring-boot/#spring-boot) | Storage Driver | |


    
3.1.13) Пользовательская настройка правил мониторинга (пороговых значений и логики проверки) метрик на серверных платформах

Продукт: АТСД

> AR

* Таблица с примерами выражений (condition) и кратким описанием - от простых правил к сложным
* Пример извлечения порога из тэга сущности, из replacement table
* Пример с таблицей Overrides, где приведены разные значения для разных рядов
* Пример с авто-порогами используя SSA

3.1.14) Возможность расчета эталонных значений отслеживаемых метрик на основе статистической информации за определенный исторический период

Продукт: АТСД

> MZ

* Портал/chartlab, на котором можно посмотреть значения за текущий день и усредненные baselines, рассчитаные для этого дня
* Портал/chartlab, на котором можно посмотреть средние значения за несколько недель и усредненные baselines, рассчитаные для этого же промежутка
* Пример правила и алерта по почте, при отклонении среднего в окне от baseline для данного интервала

## 3.2. Наличие встроенных моделей, описывающих типовые приложения

3.2.1) Наличие встроенных моделей, описывающих наиболее популярные и известные промышленные приложения (таких как MS SQL, MS Exchange, MS Active Directory, Oracle, SAP, Oracle Application server, IIS)

Продукт: АС

> SR

3.2.2) Наличие встроенных типов конфигурационных элементов и связей между ними

Продукт: АТСД

> AV

* Диаграмма со структурой Docker tag templates
* Примеры из редактора с наследованием шаблонов (н-р контейнер наследует от docker base)
* Примеры настроек колонок типа Entity Link
* Примеры встроенных Entity Views для Докера, где демонстрируется группировка по полю, содержащему связанную сущность (group by tags.docker-host)

3.2.3) Возможность создания эталонных моделей

Продукт: АС

> AV

* Редактор entity tags

3.2.4) Возможность изменения и настройки отчетов

Продукт: АТСД

> AS

* Пример настроек Export Job
* Пример настроек SQL Job
* Пример portal screenshot to email, portal to chat

3.2.5) Возможностью создания правил корреляции с использованием графического интерфейса (без использования программирования), учитывая сервисно-ресурсную модель компонентов объекта мониторинга

Продукт: АТСД

> AR

* Пример правила с двумя метриками (value function)
* Пример правила с двумя метриками - загрузка ЦПУ контейнера и загрузка ЦПУ докер-хоста на котором контейнер исполяется
* Пример правила с двумя метриками - DB server db space usage (mysql, postgres, SQL server) and OS disk space

3.2.6) Возможность настройки динамической корелляции событийной информации на основе топологических данных о взаимосвязях элементов инфраструктуры

> to be clarified

Встроенные правила мониторинга серверных платформ с возможностью их изменения

> IS

* Примеры правил для CPU high, memory low, disk low для линукс
* Ссылки на примеры из коллектора где есть правила для импорта

### 3.3. Удаление, создание и изменение типов конфигурационных единиц

3.3.1) Возможность импорта сервисно-ресурсной модели из внешних источников (например, из базы данных конфигурационных единиц предприятия (CMDB))

Продукт: АС

> SR

3.3.2) Возможность в графическом режиме без использования программирования удалять, создавать и изменять типы конфигурационных единиц и собственные типы связей между конфигурационными элементами

Продукт: АТСД

> AV

* Пример tag templates и их назначения
* Пример entity views их применения к группам

3.3.3) Возможность удаления, создания и изменения связей между конфигурационными единицами и атрибутов конфигурационных единиц и связей

> to be clarified

3.3.4) Возможность ручного добавления/удаления/изменения экземпляров конфигурационных единиц

> IS

* Создание новой сущности #6249

## 4. Прочие требования к характеристикам

4.1) Аудит действий в подсистеме

Продукт: АТСД

> AS

* Список наблюдаемых типов объектов (users, user groups etc.)
* Пример сообщения в лог при удалении, при редактировании?
* Пример message при удалении
* Пример алерта по почте, сделанного при удалении

4.2) Возможность эскалации сообщений

Продукт: ATSD

> AR

* Пример правила, которое вызывает скрипт (opc_msg) для отправки алерта во внешнюю систему используя спец. программу (есть пример, делали с AV)
* Пример правила, которое дергает веб сервис для отправки алерта во внешнюю систему алертинга (AlarmPoint, PagerDuty - у нас должны быть примеры)

4.3) Возможность получения информации из сторонних систем мониторинга IT инфраструктуры и комплексов обеспечения информационной безопасности. (ArcSight ESM, IBM Tivoli, Nagios, HP NNMi, HP OneView, MS SCOM, VmWare vCenter, OmniVista)

Продукт: АС

> SR

4.4) Возможность доработки коннекторов для интеграции с промышленным оборудованием под нужды заказчика.

Продукт: АТСД

> IS

* Пример интеграции: запись данных из [OpenMuc](https://www.openmuc.org/openmuc/user-guide/#_build_a_simple_m_bus_data_logger) в удаленную ATSD как data logger. OpenMuc выпускается под GPL и поэтому не может быть встроен в Коллектор.